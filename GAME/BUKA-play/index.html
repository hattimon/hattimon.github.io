<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1.0"/>
<title>BUKA w Dolinie Muminków</title>
<link rel="preload" as="audio" href="assets/audio/background.mp3">
<link rel="preload" as="audio" href="assets/audio/panic.mp3">
<link rel="preload" as="audio" href="assets/audio/bobek.mp3">
<link rel="preload" as="audio" href="assets/audio/deathmumin.mp3">
<link rel="preload" as="audio" href="assets/audio/deathkij.mp3">
<link rel="preload" as="audio" href="assets/audio/buka-win.mp3">
<link rel="preload" as="audio" href="assets/audio/ammo.mp3">
<link rel="stylesheet" href="css/styles.css"/>
</head>
<body>
<div class="wrap">
  <h1 class="pix">BUKA w Dolinie Muminków</h1>

  <div class="hud panel8">
    <div class="row">
      <div class="badge">Cele: Muminki <span id="left">0</span> • Pioruny 5 • Chmurki 5 • Muchomory <span id="mushLeft">?</span></div>
      <div class="badge">Motyw: <span id="themeName">Las</span> • Pogoda: <span id="weatherName">Dzień</span></div>
    </div>
    <div class="row">
      <div class="badge">Punkty: <span id="score">0</span></div>
      <div class="badge">Postęp: <span id="progress">0%</span></div>
    </div>
    <div class="row">
      <div class="badge">Poziom: <span id="level">1</span>/30</div>
      <div class="badge">Zamrożenie Włóczykija: <span id="freezeT">0s</span></div>
      <div class="badge">Global Freeze: <span id="globalFreezeT">—</span></div>
      <div class="badge">Kod poziomu: <span id="levelCode">—</span></div>
      <button id="useCodeBtn" class="btn pix">Użyj kodu</button>
    </div>
    <div class="row">
      <div class="meter hp" title="Życie"><div id="hpFill" class="fill"></div></div>
      <div class="meter cloudStock" title="Zapasy chmury (skala do 20)"><div id="cloudStockFill" class="fill"></div></div>
      <div class="meter ammoAltBar" title="Amunicja piorunów (skala do 100)"><div id="ammoAltFill" class="fill"></div></div>
      <button id="musicBtn" class="btn pix">Muzyka: ON</button>
    </div>
  </div>

  <div class="grid crt">
    <canvas id="game" width="800" height="576"></canvas>

    <div id="overlay" class="overlay">
      <div class="card panel8">
        <div class="ttl pix">Buka budzi mróz…</div>
        <div class="desc">
          Sterowanie: Shift – chmura (trzymaj 3s: mocna; ≥6s: globalna), Ctrl – piorun, WASD/Strzałki – ruch, P – pauza, R – restart.
          Kod poziomu (7 znaków, np. ABC12D3): <input id="codeInput" class="code pix" maxlength="7" placeholder="—">
        </div>
        <button id="startBtn" class="btn pix">Start</button>
      </div>
    </div>

    <!-- Mini-modal do kodów (nie wpływa na start) -->
    <div id="codeModal" class="overlay" hidden>
      <div class="card panel8">
        <div class="ttl pix">Wejście na poziom z kodu</div>
        <div class="desc">
          Wpisz kod poziomu (7 znaków): <input id="modalCodeInput" class="code pix" maxlength="7" placeholder="—">
          <div id="modalCodeMsg" class="pix" style="margin-top:6px;color:#ffb3b3;"></div>
        </div>
        <div style="display:flex;gap:10px;justify-content:center;margin-top:8px">
          <button id="codeOkBtn" class="btn pix">OK</button>
          <button id="codeCancelBtn" class="btn pix">Anuluj</button>
        </div>
      </div>
    </div>

    <div id="pause" class="overlay" hidden>
      <div class="card panel8">
        <div class="ttl pix">Pauza</div>
        <div class="desc">Shift – chmura (3s/6s), Ctrl – piorun, WASD/Strzałki – ruch, P – wznów, R – restart.</div>
        <button id="resumeBtn" class="btn pix">Wznów</button>
      </div>
    </div>

    <div id="panicDim" class="panic-dim" hidden></div>
    <div id="globalFog" class="global-fog" hidden></div>
  </div>
</div>

<audio id="musicBg" loop preload="auto" src="assets/audio/background.mp3"></audio>
<audio id="musicPanic" preload="auto" src="assets/audio/panic.mp3"></audio>
<audio id="sfxBobek" preload="auto" src="assets/audio/bobek.mp3"></audio>
<audio id="sfxDeathMumin" preload="auto" src="assets/audio/deathmumin.mp3"></audio>
<audio id="sfxDeathKij" preload="auto" src="assets/audio/deathkij.mp3"></audio>
<audio id="sfxAmmo" preload="auto" src="assets/audio/ammo.mp3"></audio>
<audio id="sfxWin" preload="auto" src="assets/audio/buka-win.mp3"></audio>

<script src="js/main.js"></script>
</body>
</html>
