<!DOCTYPE html>
<html lang="pl">
<head>
  <meta charset="UTF-8" />
  <title>Generator promptu: Zaawansowany wykres multi-interwałowy</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --bg: #0e1116;
      --panel: #121722;
      --text: #e5e7eb;
      --muted: #9aa4b2;
      --accent: #3b82f6;
      --border: #253043;
      --shadow: rgba(0,0,0,0.3);
    }
    .light {
      --bg: #f6f7fb;
      --panel: #ffffff;
      --text: #111827;
      --muted: #6b7280;
      --accent: #2563eb;
      --border: #e5e7eb;
      --shadow: rgba(0,0,0,0.08);
    }
    html, body {
      height: 100%;
      margin: 0;
      background: var(--bg);
      color: var(--text);
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
    }
    .app {
      display: grid;
      grid-template-rows: auto 1fr;
      height: 100%;
      width: 100%;
    }
    .toolbar {
      display: flex;
      gap: 12px;
      align-items: center;
      padding: 12px;
      background: var(--panel);
      border-bottom: 1px solid var(--border);
      box-shadow: 0 2px 8px var(--shadow);
      flex-wrap: wrap;
    }
    .title {
      font-weight: 700;
      margin-right: auto;
    }
    .btn {
      display: inline-flex;
      align-items: center;
      gap: 8px;
      padding: 8px 12px;
      border-radius: 8px;
      border: 1px solid var(--border);
      background: transparent;
      color: var(--text);
      cursor: pointer;
      transition: background 0.15s, border-color 0.15s, color 0.15s;
      user-select: none;
      white-space: nowrap;
    }
    .btn:hover { background: rgba(59,130,246,0.08); border-color: var(--accent); }
    .btn.active { background: var(--accent); color: white; border-color: var(--accent); }
    .select, textarea {
      background: transparent;
      color: var(--text);
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 8px 12px;
    }
    .panel-inline {
      display:flex; gap:8px; align-items:center; background: var(--panel); border: 1px solid var(--border); border-radius: 10px; padding: 8px 10px;
    }
    .container {
      position: relative;
      display: grid;
      grid-template-columns: 1fr 400px;
      gap: 12px;
      padding: 12px;
      min-height: 0;
    }
    #preview {
      position: relative;
      border: 1px dashed var(--border);
      border-radius: 10px;
      padding: 12px;
      background: linear-gradient(135deg, rgba(59,130,246,0.08), transparent);
      overflow: auto;
    }
    .sidebar {
      display: grid;
      grid-template-rows: auto 1fr auto;
      gap: 12px;
      min-height: 0;
    }
    #prompt {
      width: 100%;
      height: 100%;
      min-height: 220px;
      resize: vertical;
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      line-height: 1.4;
    }
    .hint {
      font-size: 12px;
      color: var(--muted);
    }
    .row { display:flex; gap:8px; align-items:center; flex-wrap: wrap; }
    .intervals { display:flex; gap:6px; overflow-x:auto; padding-bottom:4px; scrollbar-width:none; }
    .intervals::-webkit-scrollbar { display:none; }
    .pill {
      background: var(--panel);
      color: var(--text);
      border: 1px solid var(--border);
      border-radius: 9999px;
      padding: 6px 10px;
      font-size: 12px;
      opacity: 0.95;
    }
    @media (max-width: 1000px) {
      .container { grid-template-columns: 1fr; }
    }
  </style>
  <script type="importmap">
  {
    "imports": {}
  }
  </script>
</head>
<body>
  <div class="app light" id="appRoot">
    <div class="toolbar">
      <div class="title">Generator promptu dla wykresu multi-interwałowego</div>
      <div class="row">
        <button class="btn" id="toggleTheme">Tryb: Jasny</button>
        <button class="btn" id="copyPrompt">Kopiuj prompt</button>
      </div>
    </div>

    <div class="container">
      <div id="preview">
        <div class="row" style="margin-bottom:8px;">
          <div class="pill">Przegląd: Streszczenie wymagań</div>
        </div>
        <ul id="summary" style="margin-top:0; padding-left:18px;">
          <li>Do 3 poziomów wyższego interwału nakładanych na świeczki (3. poziom najbardziej transparentny).</li>
          <li>Mapowanie: H4 -> D1, D1 -> M, M -> Y (M tylko do 2. stopnia), wszystko niższe do 3. stopnia.</li>
          <li>Obsługiwane interwały: m1, m5, m15, H1, H4, D1, tygodniowe, miesięczne, roczne. Najwyższy bazowy: roczne świece.</li>
          <li>Tryb ciemny i jasny do wyboru. Responsywny: mobilny i desktop. Dopasowanie do okna.</li>
          <li>Pełne narzędzia jak w TradingView lub zbliżone, z cieniami interwałów świec.</li>
          <li>Wskaźniki: RSI i Stochastic Oscillator, możliwość dodawania i zmiany rozmiaru przez przeciąganie.</li>
          <li>Domyślnie RSI na górze (1/8 wysokości), Stochastic na dole (1/8 wysokości).</li>
        </ul>
        <div class="pill">Poniżej znajduje się wygenerowany prompt w języku polskim. Możesz go skopiować lub edytować.</div>
      </div>

      <div class="sidebar">
        <div class="panel-inline">
          <span style="font-weight:600;">Opcje:</span>
          <label class="row"><input id="optTV" type="checkbox" checked /> Preferuj TradingView (lub odpowiednik)</label>
          <label class="row"><input id="optTools" type="checkbox" checked /> Wymuś narzędzia rysunkowe</label>
          <label class="row"><input id="optMobile" type="checkbox" checked /> Wersja mobilna</label>
          <label class="row"><input id="optLightDark" type="checkbox" checked /> Tryb jasny/ciemny</label>
        </div>
        <textarea id="prompt" spellcheck="false"></textarea>
        <div class="row" style="justify-content: space-between;">
          <div class="hint">Wskazówka: Zaznacz opcje powyżej, aby doprecyzować prompt. Kliknij „Kopiuj prompt”.</div>
          <div class="pill" id="status">Gotowy</div>
        </div>
      </div>
    </div>
  </div>

  <script type="module">
    // Theme handling
    const app = document.getElementById('appRoot');
    const toggleThemeBtn = document.getElementById('toggleTheme');
    let isDark = false;
    function applyTheme() {
      app.classList.toggle('light', !isDark);
      toggleThemeBtn.textContent = 'Tryb: ' + (isDark ? 'Ciemny' : 'Jasny');
    }
    toggleThemeBtn.addEventListener('click', () => { isDark = !isDark; applyTheme(); });
    applyTheme();

    // Options
    const optTV = document.getElementById('optTV');
    const optTools = document.getElementById('optTools');
    const optMobile = document.getElementById('optMobile');
    const optLightDark = document.getElementById('optLightDark');
    const promptEl = document.getElementById('prompt');
    const statusEl = document.getElementById('status');

    function buildPrompt() {
      const parts = [];
      parts.push(
        'Jesteś specjalistą od tworzenia stron WWW oraz wykresów i wskaźników tradingowych. ' +
        'Zaprojektuj i zaimplementuj w pełni responsywną aplikację wykresową (desktop + mobile) z trybem jasnym i ciemnym. ' +
        'Wykres ma wyświetlać świeczki głównego interwału oraz do 3 wyższych interwałów nałożonych jako półtransparentne świece (każdy wyższy stopień bardziej transparentny; 3. stopień najbardziej).'
      );
      parts.push(
        'Wymagania dotyczące interwałów i mapowania w górę: ' +
        'Obsługiwane interwały: m1, m5, m15, H1, H4, D1, tygodniowe (W1), miesięczne (M), roczne (Y). ' +
        'Zasada 3 stopni w górę dotyczy wszystkich interwałów niższych niż miesięczny. ' +
        'Dla świec H4 pokaż nakładkę D1 oraz D1->M; dla D1 pokaż M oraz M->Y; jeżeli wybrany miesięczny (M), to pokazuj tylko roczne (Y) – czyli do drugiego stopnia interwału. ' +
        'Najwyższym bazowym interwałem są roczne świece.'
      );
      if (optTV.checked) {
        parts.push(
          'Preferowane jest użycie wykresu TradingView (lub równoważnego zbliżonego pod względem funkcjonalności), ' +
          'z pełną dostępnością typowych narzędzi TradingView (przybory rysunkowe, crosshair, skala czasu/ceny, zoom/scroll) ' +
          'oraz z cieniami interwałów świec dla wyższych TF (świece HTF półtransparentne).'
        );
      } else {
        parts.push(
          'Możesz użyć dowolnej biblioteki wykresowej z funkcjonalnościami zbliżonymi do TradingView, ' +
          'zapewniając narzędzia rysunkowe, crosshair, skalowanie i przewijanie oraz półtransparentne nakładki świec HTF.'
        );
      }
      if (optTools.checked) {
        parts.push(
          'Zapewnij widoczne narzędzia analizy technicznej i rysunkowe, ' +
          'a także panel wyboru interwałów: m1, m5, m15, H1, H4, D1, W1, M, Y. ' +
          'Wykres musi automatycznie dopasowywać się do rozmiaru okna.'
        );
      }
      parts.push(
        'Wskaźniki: dodaj możliwość włączania RSI oraz Stochastic Oscillator (parametry konfigurowalne). ' +
        'Umożliw przeciąganie separatorów/pasków, aby zmienić wysokość paneli wskaźników. ' +
        'Domyślnie RSI ma znajdować się u góry wykresu i zajmować 1/8 wysokości, a Stochastic u dołu i również 1/8 wysokości okna.'
      );
      if (optLightDark.checked) {
        parts.push('Aplikacja powinna posiadać przełącznik trybu jasnego i ciemnego oraz odpowiednią paletę kolorów dla obu trybów.');
      }
      if (optMobile.checked) {
        parts.push('Projekt musi być mobilny i przeglądarkowy (RWD), z optymalnym UX na ekranach dotykowych i desktopowych.');
      }
      parts.push(
        'Logika interwałów (transparentność): ' +
        'Świeczki głównego interwału są w pełnej nieprzezroczystości. ' +
        'Pierwszy wyższy interwał (HTF1) ~35% opacity, drugi (HTF2) ~22%, trzeci (HTF3) ~12%. ' +
        'W przypadku interwału M (miesięcznego) nakładaj tylko Y (roczne) jako HTF1 (brak dalszych stopni).'
      );
      parts.push(
        'Upewnij się, że: ' +
        'a) interfejs zawiera szybkie przyciski wyboru interwału, ' +
        'b) wyświetlany jest bieżący interwał i tryb, ' +
        'c) wykres dopasowuje się do okna (fit to content), ' +
        'd) dane są dostępne również w wyższych interwałach przez agregację (np. z m1 w górę).'
      );
      parts.push(
        'Wynik: dostarcz kompletny, działający komponent/aplikację z powyższymi wymaganiami, ' +
        'z czytelną strukturą i możliwością łatwej rozbudowy.'
      );
      return parts.join('\n\n');
    }

    function updatePrompt() {
      promptEl.value = buildPrompt();
    }

    [optTV, optTools, optMobile, optLightDark].forEach(el => el.addEventListener('change', updatePrompt));
    updatePrompt();

    // Copy prompt
    document.getElementById('copyPrompt').addEventListener('click', async () => {
      try {
        await navigator.clipboard.writeText(promptEl.value);
        statusEl.textContent = 'Skopiowano do schowka';
        statusEl.style.background = 'rgba(34,197,94,0.15)';
        setTimeout(() => { statusEl.textContent = 'Gotowy'; statusEl.style.background = ''; }, 1500);
      } catch (e) {
        statusEl.textContent = 'Błąd kopiowania';
        statusEl.style.background = 'rgba(239,68,68,0.2)';
        setTimeout(() => { statusEl.textContent = 'Gotowy'; statusEl.style.background = ''; }, 2000);
      }
    });

    // No external assets needed; all UI is procedural.
  </script>
</body>
</html>
