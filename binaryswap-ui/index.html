<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>BinarySwap</title>
  <script src="https://cdn.jsdelivr.net/npm/ethers@6.8.1/dist/ethers.umd.min.js"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
  <style>
    :root { --bg:#1d1d1d; --text:#1db954; --card:#2a2a2a; --btn:#3a3a3a; --link:#a0ffcc; }
    [data-theme="light"] { --bg:#fff; --text:#000; --card:#f0f0f0; --btn:#e0e0e0; --link:#007acc; }
    body { margin:0;padding:20px;font-family:Arial;background:var(--bg);color:var(--text);transition:0.3s; }
    a{color:var(--link);text-decoration:none;}
    button{margin:5px;padding:10px 15px;border:none;border-radius:5px;background:var(--btn);color:var(--text);cursor:pointer;display:inline-flex;align-items:center;gap:6px;}
    input,select{margin:5px;padding:8px;border:1px solid #555;border-radius:5px;background:var(--card);color:var(--text);}
    .section{margin-top:20px;padding:15px;border:1px solid #444;border-radius:10px;background:var(--card); }
    #logo{max-width:500px;display:block;margin:0 auto;}
    .top-links{text-align:center;margin-bottom:20px;}
    .theme-toggle{position:fixed;top:10px;right:10px;padding:8px 12px;border-radius:5px;z-index:1000;background:var(--btn);color:var(--text);border:none;cursor:pointer;}
    .center-title{text-align:center;font-size:24px;margin-top:10px;}
    .error-message{margin-top:20px;padding:10px;background-color:#f8d7da;border:1px solid #f5c6cb;border-radius:5px;color:#721c24;}
    #error-text{white-space: pre-wrap; word-wrap: break-word;}
  </style>
</head>
<body>
  <img id="logo" src="logo.png" alt="BinarySwap logo">
  
<div class="top-links"><a href="https://binaryswap.gitbook.io/binaryswap" target="_blank">ðŸ“˜ Dokumentacja</a></div>
<div class="top-links"><a href="https://dexscreener.com/opbnb/0x506b8322e1159d06e493ebe7ffa41a24291e7ae3" target="_blank">ðŸ“Š Kurs 0101/WBNB</a></div>
<div class="top-links"><a href="https://pancakeswap.finance/bridge" target="_blank">ðŸŒ‰ Szybki Most opBNB â‡„ FDUSD</a></div>
<div class="top-links"><a href="https://opbnb-bridge.bnbchain.org/withdraw?type=official" target="_blank">ðŸŒ‰ Oficjalny Most opBNB â‡„ BNB (7 dni)</a></div>
  
<div style="position:fixed; top:10px; left:10px; z-index:1000;">
  <button onclick="translateToEnglish()">
    <img src="https://upload.wikimedia.org/wikipedia/commons/a/a4/Flag_of_the_United_Kingdom.svg" alt="EN" style="width: 30px; height: 20px; margin-right: 5px;">
    English
  </button>
  <button onclick="translateToPolish()">
    <img src="https://upload.wikimedia.org/wikipedia/commons/1/12/Flag_of_Poland.svg" alt="PL" style="width: 30px; height: 20px; margin-right: 5px;">
    Polski
  </button>
</div>

  <button class="theme-toggle" onclick="toggleTheme()">ðŸŒž Tryb jasny</button>
  <div class="center-title" style="text-align: center; color: red; font-weight: bold;">Tryb Awaryjny BinarySwap</div>
 <p style="text-align: center;">
  (<b>KlikajÄ…c SWAP lub Dodaj/UsuÅ„ LP</b> wymaga to kilku kolejnych klikniÄ™Ä‡ w celu zatwierdzenia interakcji z kontraktem na podanÄ… sumÄ™ â€“ zatwierdzenie np. kontraktu Swap i potwierdzenie Swap)<br>
  Jest to bezpieczne (SSL) zastÄ™pcze GUI korzystajÄ…ce z oryginalnych funkcji kontraktÃ³w BinarySwap.<br>
   <font color="yellow" size="small">Polecam portfel <a href="https://rabby.io/" target="_blank">Rabby.io</a> gdzie rÃ³wnieÅ¼ cofniesz uprawnienia. <br>
   Do podglÄ…du historii transakcji polecam <a href="https://debank.com/" target="_blank">DeBank.com</a>.</font>
</p>
  <div id="app-root">
    <div class="section">
      <p><strong>Portfel:</strong> <span id="wallet-address">NiepoÅ‚Ä…czony</span></p>
      <button onclick="connectWallet()"><i class="fab fa-ethereum"></i> PoÅ‚Ä…cz MetaMask</button>
      <button onclick="switchToOpBNB()"><i class="fas fa-network-wired"></i> PrzeÅ‚Ä…cz na opBNB</button>
    </div>

    <div class="section">
      <h3>ZawartoÅ›Ä‡ Portfela</h3>
      <p>0101: <span id="balance-0101">â€“</span></p>
      <p>BNB: <span id="balance-bnb">â€“</span></p>
      <p>LP (0101/BNB): <span id="balance-lp">â€“</span></p>
    </div>

    <div class="section">
      <h3>Swap</h3>
      <input type="number" id="swapPercent" placeholder="iloÅ›Ä‡ w (1â€“100) %">
      <h4>Zamiana</h4>
      <select id="swapDirection">
        <option value="toToken">BNB â†’ 0101</option>
        <option value="toBNB">0101 â†’ BNB</option>
      </select>
      <h4>PoÅ›lizg</h4>
      <select id="swapSlippage">
        <option value="1">1%</option>
        <option value="3">3%</option>
        <option value="5">5%</option>
        <option value="10">10%</option>
        <option value="20">20%</option>
        <option value="30">30%</option>
        <option value="50">50%</option>
        <option value="100">100%</option>
      </select>
      <button onclick="handleSwap()"><i class="fas fa-exchange-alt"></i> Swap</button>
    </div>

    <div class="section">
      <h3>Pula PÅ‚ynnoÅ›ci</h3>
      <input type="number" id="lpPercent" placeholder="iloÅ›Ä‡ w (1â€“100) %">
      <button onclick="addLiquidity(parseInt(lpPercent.value))"><i class="fas fa-plus-circle"></i> Dodaj LP</button>
      <button onclick="removeLiquidity(parseInt(lpPercent.value))"><i class="fas fa-minus-circle"></i> UsuÅ„ LP</button>
    </div>

    <div class="section" id="lp-info">
      <h3>MasterChef â€“ Twoje pule (WiÄ™cej funkcji jak odstakowanie LP dodam wkrÃ³tce)</h3>
    </div>

    <!-- Error Message Section -->
    <div class="error-message" id="error-container" style="display:none;">
      <strong>BÅ‚Ä…d:</strong>
      <pre id="error-text"></pre>
    </div>
  </div>

  <script src="app.js"></script>
<script>
const originalTexts = new Map();
let currentLang = 'en';

const translations = [
  // Statyczne UI
  { pl: "ðŸ“˜ Dokumentacja", en: "ðŸ“˜ Docs" },
  { pl: "ðŸ“Š Kurs 0101/WBNB", en: "ðŸ“Š 0101/WBNB Price" },
  { pl: "ðŸŒ‰ Szybki Most opBNB â‡„ FDUSD", en: "ðŸŒ‰ Fast Bridge opBNB â‡„ FDUSD" },
  { pl: "ðŸŒ‰ Oficjalny Most opBNB â‡„ BNB (7 dni)", en: "ðŸŒ‰ Official opBNB â‡„ BNB Bridge (7d)" },
  { pl: "PoÅ‚Ä…cz MetaMask", en: "Connect MetaMask" },
  { pl: "PrzeÅ‚Ä…cz na opBNB", en: "Switch to opBNB" },
  { pl: "ZawartoÅ›Ä‡ Portfela", en: "Wallet Balances" },
  { pl: "Portfel:", en: "Wallet:" },
  { pl: "NiepoÅ‚Ä…czony", en: "Not Connected" },
  { pl: "BNB â†’ 0101", en: "BNB â†’ 0101" },
  { pl: "0101 â†’ BNB", en: "0101 â†’ BNB" },
  { pl: "Zamiana", en: "Swap" },
  { pl: "PoÅ›lizg", en: "Slippage" },
  { pl: "Dodaj LP", en: "Add LP" },
  { pl: "UsuÅ„ LP", en: "Remove LP" },
  { pl: "ðŸŒž Tryb jasny", en: "ðŸŒž Light Mode" },
  { pl: "Tryb Awaryjny BinarySwap", en: "BinarySwap Emergency Mode" },
  { pl: "MasterChef â€“ Twoje pule (WiÄ™cej funkcji jak odstakowanie LP dodam wkrÃ³tce)", en: "MasterChef â€“ Your Pools (More features like LP unstake coming soon)" },
  { pl: "KlikajÄ…c SWAP lub Dodaj/UsuÅ„ LP", en: "By clicking SWAP or Add/Remove LP" },
  { pl: "Jest to bezpieczne (SSL) zastÄ™pcze GUI korzystajÄ…ce z oryginalnych funkcji kontraktÃ³w BinarySwap.", en: "This is a secure (SSL) backup GUI using BinarySwap contract functions." },
  { pl: "Polecam portfel", en: "Recommended wallet:" },
  { pl: "Do podglÄ…du historii transakcji polecam", en: "For transaction history tracking, use" },
  { pl: "iloÅ›Ä‡ w (1â€“100) %", en: "amount in (1â€“100)%" },
  { pl: "BÅ‚Ä…d:", en: "Error:" },

  // Komunikaty bÅ‚Ä™dÃ³w z app.js
  { pl: "Zainstaluj MetaMask!", en: "Install MetaMask!" },
  { pl: "Nie moÅ¼na przeÅ‚Ä…czyÄ‡ sieci", en: "Unable to switch network" },
  { pl: "BÅ‚Ä…d poÅ‚Ä…czenia z portfelem:", en: "Wallet connection error:" },
  { pl: "BÅ‚Ä…d przy swapie (BNB â†’ 0101):", en: "Swap error (BNB â†’ 0101):" },
  { pl: "BÅ‚Ä…d przy swapie (0101 â†’ BNB):", en: "Swap error (0101 â†’ BNB):" },
  { pl: "Procent 1â€“100!", en: "Percentage 1â€“100!" },
  { pl: "NieprawidÅ‚owe saldo LP lub 0101", en: "Invalid LP or 0101 balance" },
  { pl: "NieprawidÅ‚owe saldo LP", en: "Invalid LP balance" },
  { pl: "WystÄ…piÅ‚ bÅ‚Ä…d:", en: "An error occurred:" },
  { pl: "Nieznany bÅ‚Ä…d:", en: "Unknown error:" },
  { pl: "Brak adresu portfela!", en: "No wallet address!" },
  { pl: "Brak aktywnego poÅ‚Ä…czenia!", en: "No active connection!" },
  { pl: "Nie wykryto Web3!", en: "Web3 not detected!" },
  { pl: "BÅ‚Ä…d pobierania salda:", en: "Balance fetch error:" },
  { pl: "BÅ‚Ä…d pobierania danych z MasterChef:", en: "Error fetching MasterChef data:" },
  { pl: "Podano 0 LP â€“ nic nie do wypÅ‚aty", en: "0 LP provided â€“ nothing to withdraw" },
  { pl: "Zbyt duÅ¼y poÅ›lizg â€“ anulowano", en: "Slippage too high â€“ cancelled" },

  // Placeholdery (jeÅ›li sÄ… uÅ¼ywane)
  { pl: "Wpisz iloÅ›Ä‡", en: "Enter amount" },
  { pl: "Wpisz wartoÅ›Ä‡ LP", en: "Enter LP value" }
];

function translateTo(lang) {
  currentLang = lang;

  document.querySelectorAll('body *').forEach(el => {
    // ZapamiÄ™taj oryginaÅ‚ tylko raz
    if (!originalTexts.has(el)) originalTexts.set(el, {
      html: el.innerHTML,
      placeholder: el.placeholder,
      value: el.value
    });

    translations.forEach(({ pl, en }) => {
      const from = lang === 'pl' ? en : pl;
      const to = lang === 'pl' ? pl : en;

      // TÅ‚umaczenie innerHTML
      if (el.innerHTML && el.innerHTML.trim() === from) {
        el.innerHTML = to;
      }

      // Placeholdery
      if (el.placeholder && el.placeholder.trim() === from) {
        el.placeholder = to;
      }

      // Value (np. <input type="submit">)
      if (el.value && el.value.trim() === from) {
        el.value = to;
      }
    });
  });
}

// Wykrywanie jÄ™zyka przy starcie
(function autoDetectLanguage() {
  const browserLang = navigator.language || navigator.userLanguage;
  if (browserLang.startsWith('pl')) {
    translateTo('pl');
  } else {
    translateTo('en');
  }
})();

// PrzeÅ‚Ä…czniki rÄ™czne
function translateToEnglish() {
  translateTo('en');
}
function translateToPolish() {
  translateTo('pl');
}
</script>

</body>
</html>
