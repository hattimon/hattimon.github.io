<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>BinarySwap</title>
  <script src="https://cdn.jsdelivr.net/npm/ethers@6.8.1/dist/ethers.umd.min.js"></script>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <div class="container">
    <img id="logo" src="logo.png" alt="BinarySwap logo">

    <div id="google_translate_element" style="position: absolute; top: 20px; left: 20px;"></div>

    <div class="top-links">
      <a href="https://binaryswap.gitbook.io/binaryswap" target="_blank">ðŸ“˜ Documentation</a>
      <a href="https://dexscreener.com/opbnb/0x506b8322e1159d06e493ebe7ffa41a24291e7ae3" target="_blank">ðŸ“Š 0101/WBNB Price</a>
      <a href="https://pancakeswap.finance/bridge" target="_blank">ðŸŒ‰ Fast Bridge opBNB â‡„ FDUSD</a>
      <a href="https://opbnb-bridge.bnbchain.org/withdraw?type=official" target="_blank">ðŸŒ‰ Official Bridge opBNB â‡„ BNB (7 days)</a>
    </div>

    <button class="theme-toggle" onclick="toggleTheme()">ðŸŒž Light Mode</button>
    <button class="lang-toggle" onclick="toggleLanguage()">ðŸ‡µðŸ‡± Polski</button>
    <div class="center-title">BinarySwap Emergency Mode</div>
    <p class="intro-text">
      (<b>Clicking SWAP or Add/Remove LP</b> requires several subsequent clicks to approve the contract interaction for the specified amount â€“ e.g., approving the Swap contract and confirming the Swap)<br>
      This is a secure (SSL) backup GUI using BinarySwap's original contract functions.<br>
      <font color="orange">I recommend the <a href="https://rabby.io/" target="_blank">Rabby.io</a> wallet where you can also revoke permissions.<br>
      For transaction history, check <a href="https://debank.com/" target="_blank">DeBank.com</a>.</font>
    </p>

    <div id="app-root">
      <div class="section wallet-section">
        <p><strong>Wallet:</strong> <span id="wallet-address">Disconnected</span></p>
        <button class="uniswap-btn" onclick="connectWallet()"><i class="fab fa-ethereum"></i> Connect/Refresh Wallet</button>
        <button class="uniswap-btn" onclick="switchToOpBNB()"><i class="fas fa-network-wired"></i> Switch to opBNB</button>
      </div>

      <div class="section wallet-content-section">
        <h3>Wallet Contents</h3>
        <p>0101: <span id="balance-0101">â€“</span></p>
        <p>BNB: <span id="balance-bnb">â€“</span></p>
        <p>LP (0101/BNB): <span id="balance-lp">â€“</span></p>
      </div>

      <div class="section swap-section">
        <h3>Swap</h3>
        <div class="swap-card">
          <div class="swap-input">
            <input type="number" id="swapPercent" placeholder="Amount (1â€“100) %">
            <select id="swapDirection">
              <option value="toToken">BNB â†’ 0101</option>
              <option value="toBNB">0101 â†’ BNB</option>
            </select>
          </div>
          <div class="swap-settings">
            <select id="swapSlippage">
              <option value="1">1%</option>
              <option value="3">3%</option>
              <option value="5">5%</option>
              <option value="10">10%</option>
              <option value="20">20%</option>
              <option value="30">30%</option>
              <option value="50">50%</option>
              <option value="100">100%</option>
            </select>
          </div>
          <button class="uniswap-btn swap-btn" onclick="handleSwap()">Swap</button>
        </div>
      </div>

      <div class="section liquidity-section">
        <h3>Liquidity Pool</h3>
        <div class="liquidity-card">
          <div class="liquidity-input">
            <input type="number" id="lpPercent" placeholder="Amount (1â€“100) %">
          </div>
          <div class="liquidity-actions">
            <button class="uniswap-btn" onclick="addLiquidity(parseInt(lpPercent.value))">Add LP</button>
            <button class="uniswap-btn" onclick="removeLiquidity(parseInt(lpPercent.value))">Remove LP</button>
          </div>
        </div>
      </div>

      <div class="section lp-info-section">
        <h3>MasterChef â€“ Emergency LP, NFT Withdrawal:</h3>
        <div class="masterchef-instructions">
          <p><i class="fas fa-info-circle"></i> <strong>Step 1:</strong> Visit the contract: <a href="https://opbnbscan.com/address/0x39a786421889EB581bd105508a0D2Dc03523B903?tab=Contract&p=1" target="_blank">0x39a786421889EB581bd105508a0D2Dc03523B903</a><br>Copy the Contract Address and the <b>Contract ABI</b> field.</p>
          <p><i class="fas fa-external-link-alt"></i> <strong>Step 2:</strong> Open in a new tab: <a href="https://hattimon.github.io/sm-gui" target="_blank">Smart Contract Interface</a><br>Switch to opBNB network and paste the data into the respective fields.</p>
          <p><i class="fas fa-list-ol"></i> <strong>Step 3:</strong> Go to the <b>emergencyWithdraw</b> field and enter 0, 1, 2, 3, 4, 5, etc.<br>Depending on what you staked, Rabby Wallet will show a signing message (e.g., LP or NFT withdrawal)<br>- Approve each transaction showing a withdrawal from the contract and check the LP token amount in DeBank or above (rest can be done aboveðŸ˜‰).</p>
        </div>
        <font color="gray">
        <div class="contracts-list">
          <p><i class="fas fa-building"></i> <strong>Factory:</strong> 0xd50aaE6C73E2486B0Da718D23F35Dcf5aad25911</p>
          <p><i class="fas fa-play"></i> <strong>Init:</strong> 0x5ef9d9226744e2d0335d11ea48193e4ccd224fb01d8557c9db762f93cfe52881</p>
          <p><i class="fas fa-exchange-alt"></i> <strong>Router:</strong> 0x3958795ca5C4d9f7Eb55656Ba664efA032E1357b</p>
          <p><i class="fas fa-random"></i> <strong>Multi:</strong> 0x689e9631d1e308845DE5661C0B6bdE23c841e459</p>
          <p><i class="fas fa-user-chef"></i> <strong>Masterchef:</strong> 0x39a786421889EB581bd105508a0D2Dc03523B903</p>
          <p><i class="fas fa-file-alt"></i> <strong>MasterChef Audit:</strong> <a href="https://github.com/bcaservice/audit-report/blob/main/MasterChef/MasterChef.pdf" target="_blank">https://github.com/bcaservice/audit-report/blob/main/MasterChef/MasterChef.pdf</a></p>
          <p><i class="fas fa-fire"></i> <strong>LP burn:</strong> https://mainnet.opbnbscan.com/tx/0x64a7105d6c186a165ece658c1b7987e49b8377f8edd75595a15da133b8bdea4c</p>
          <p><i class="fas fa-desktop"></i> <strong>Terminals:</strong> 0xD954Bb4E6aF0CCC7d692431b8841A03916BeC9e9</p>
          <p><i class="fas fa-gift"></i> <strong>Wrapped Terminals:</strong> 0x7dC01688De0eFf09657406a7d55933d9349cC0B6</p>
          <p><i class="fas fa-coins"></i> <strong>0101 Token:</strong> 0xa41B3067eC694DBec668c389550bA8fc589e5797</p>
          <p><i class="fas fa-handshake"></i> <strong>LP 0101/BNB:</strong> 0x506b8322e1159d06e493ebe7ffa41a24291e7ae3</p>
          <p><i class="fas fa-globe"></i> <strong>opBNB Block Explorer:</strong> <a href="https://mainnet.opbnbscan.com" target="_blank">https://mainnet.opbnbscan.com</a></p>
        </div>
        </font>
      </div>

      <div class="error-message" id="error-container" style="display:none;">
        <strong>Error:</strong>
        <pre id="error-text"></pre>
      </div>
    </div>
  </div>

  <script src="app.js"></script>

  <script type="text/javascript">
    function googleTranslateElementInit() {
      new google.translate.TranslateElement({
        pageLanguage: 'en',
        includedLanguages: 'en,pl',
        layout: google.translate.TranslateElement.InlineLayout.SIMPLE
      }, 'google_translate_element');
    }

    let lang = 'en';
    const translations = {
      en: {
        connect: 'Connect/Refresh Wallet',
        switch: 'Switch to opBNB',
        walletContents: 'Wallet Contents',
        swap: 'Swap',
        swapDirection: 'Swap Direction',
        slippage: 'Slippage',
        liquidityPool: 'Liquidity Pool',
        addLP: 'Add LP',
        removeLP: 'Remove LP',
        emergency: 'MasterChef â€“ Emergency LP, NFT Withdrawal:',
        step1: 'Step 1: Visit the contract:',
        step2: 'Step 2: Open in a new tab:',
        step3: 'Step 3: Go to the <b>emergencyWithdraw</b> field and enter 0, 1, 2, 3, 4, 5, etc.',
        disconnected: 'Disconnected',
        intro: '(<b>Clicking SWAP or Add/Remove LP</b> requires several subsequent clicks to approve the contract interaction for the specified amount â€“ e.g., approving the Swap contract and confirming the Swap)<br>This is a secure (SSL) backup GUI using BinarySwap\'s original contract functions.<br><font color="orange">I recommend the <a href="https://rabby.io/" target="_blank">Rabby.io</a> wallet where you can also revoke permissions.<br>For transaction history, check <a href="https://debank.com/" target="_blank">DeBank.com</a>.</font>'
      },
      pl: {
        connect: 'PoÅ‚Ä…cz/OdÅ›wieÅ¼ Portfel',
        switch: 'PrzeÅ‚Ä…cz na opBNB',
        walletContents: 'ZawartoÅ›Ä‡ Portfela',
        swap: 'Swap',
        swapDirection: 'Zamiana',
        slippage: 'PoÅ›lizg',
        liquidityPool: 'Pula PÅ‚ynnoÅ›ci',
        addLP: 'Dodaj LP',
        removeLP: 'UsuÅ„ LP',
        emergency: 'MasterChef â€“ Awaryjna wypÅ‚ata LP, NFT itp:',
        step1: 'Krok 1: WejdÅº na kontrakt:',
        step2: 'Krok 2: OtwÃ³rz w nowej zakÅ‚adce strone:',
        step3: 'Krok 3: PrzejdÅº do pola <b>emergencyWithdraw</b> i wpisuj kolejno 0, 1, 2, 3, 4, 5 itd.',
        disconnected: 'NiepoÅ‚Ä…czony',
        intro: '(<b>KlikajÄ…c SWAP lub Dodaj/UsuÅ„ LP</b> wymaga to kilku kolejnych klikniÄ™Ä‡ w celu zatwierdzenia interakcji z kontraktem na podanÄ… sumÄ™ â€“ zatwierdzenie np. kontraktu Swap i potwierdzenie Swap)<br>Jest to bezpieczne (SSL) zastÄ™pcze GUI korzystajÄ…ce z oryginalnych funkcji kontraktÃ³w BinarySwap.<br><font color="orange">Polecam portfel <a href="https://rabby.io/" target="_blank">Rabby.io</a> gdzie rÃ³wnieÅ¼ cofniesz uprawnienia.<br>Do podglÄ…du historii transakcji polecam <a href="https://debank.com/" target="_blank">DeBank.com</a>.</font>'
      }
    };

    function toggleLanguage() {
      lang = lang === 'en' ? 'pl' : 'en';
      document.querySelector('.lang-toggle').textContent = `ðŸ‡¬ðŸ‡§ ${lang === 'en' ? 'English' : 'Polski'}`;
      document.querySelector('.center-title').textContent = `BinarySwap ${lang === 'en' ? 'Emergency Mode' : 'Tryb Awaryjny'}`;
      document.querySelector('.intro-text').innerHTML = translations[lang].intro;
      document.querySelectorAll('.section')[0].innerHTML = `
        <p><strong>Wallet:</strong> <span id="wallet-address">${translations[lang].disconnected}</span></p>
        <button class="uniswap-btn" onclick="connectWallet()"><i class="fab fa-ethereum"></i> ${translations[lang].connect}</button>
        <button class="uniswap-btn" onclick="switchToOpBNB()"><i class="fas fa-network-wired"></i> ${translations[lang].switch}</button>
      `;
      document.querySelectorAll('.section')[1].innerHTML = `
        <h3>${translations[lang].walletContents}</h3>
        <p>0101: <span id="balance-0101">â€“</span></p>
        <p>BNB: <span id="balance-bnb">â€“</span></p>
        <p>LP (0101/BNB): <span id="balance-lp">â€“</span></p>
      `;
      document.querySelectorAll('.section')[2].innerHTML = `
        <h3>${translations[lang].swap}</h3>
        <div class="swap-card">
          <div class="swap-input">
            <input type="number" id="swapPercent" placeholder="${lang === 'en' ? 'Amount (1â€“100) %' : 'IloÅ›Ä‡ (1â€“100) %'}">
            <select id="swapDirection">
              <option value="toToken">${lang === 'en' ? 'BNB â†’ 0101' : 'BNB â†’ 0101'}</option>
              <option value="toBNB">${lang === 'en' ? '0101 â†’ BNB' : '0101 â†’ BNB'}</option>
            </select>
          </div>
          <div class="swap-settings">
            <select id="swapSlippage">
              <option value="1">1%</option>
              <option value="3">3%</option>
              <option value="5">5%</option>
              <option value="10">10%</option>
              <option value="20">20%</option>
              <option value="30">30%</option>
              <option value="50">50%</option>
              <option value="100">100%</option>
            </select>
          </div>
          <button class="uniswap-btn swap-btn" onclick="handleSwap()">${lang === 'en' ? 'Swap' : 'Swap'}</button>
        </div>
      `;
      document.querySelectorAll('.section')[3].innerHTML = `
        <h3>${translations[lang].liquidityPool}</h3>
        <div class="liquidity-card">
          <div class="liquidity-input">
            <input type="number" id="lpPercent" placeholder="${lang === 'en' ? 'Amount (1â€“100) %' : 'IloÅ›Ä‡ (1â€“100) %'}">
          </div>
          <div class="liquidity-actions">
            <button class="uniswap-btn" onclick="addLiquidity(parseInt(lpPercent.value))">${translations[lang].addLP}</button>
            <button class="uniswap-btn" onclick="removeLiquidity(parseInt(lpPercent.value))">${translations[lang].removeLP}</button>
          </div>
        </div>
      `;
      document.querySelectorAll('.section')[4].querySelector('h3').textContent = translations[lang].emergency;
      document.querySelectorAll('.section')[4].querySelectorAll('.masterchef-instructions p')[0].innerHTML = `<i class="fas fa-info-circle"></i> <strong>${translations[lang].step1}</strong> Visit the contract: <a href="https://opbnbscan.com/address/0x39a786421889EB581bd105508a0D2Dc03523B903?tab=Contract&p=1" target="_blank">0x39a786421889EB581bd105508a0D2Dc03523B903</a><br>Copy the Contract Address and the <b>Contract ABI</b> field.`;
      document.querySelectorAll('.section')[4].querySelectorAll('.masterchef-instructions p')[1].innerHTML = `<i class="fas fa-external-link-alt"></i> <strong>${translations[lang].step2}</strong> Open in a new tab: <a href="https://hattimon.github.io/sm-gui" target="_blank">Smart Contract Interface</a><br>Switch to opBNB network and paste the data into the respective fields.`;
      document.querySelectorAll('.section')[4].querySelectorAll('.masterchef-instructions p')[2].innerHTML = `<i class="fas fa-list-ol"></i> <strong>${translations[lang].step3}</strong> Depending on what you staked, Rabby Wallet will show a signing message (e.g., LP or NFT withdrawal)<br>- Approve each transaction showing a withdrawal from the contract and check the LP token amount in DeBank or above (rest can be done aboveðŸ˜‰).`;
    }

    function toggleTheme() {
      document.body.dataset.theme = document.body.dataset.theme === 'light' ? 'dark' : 'light';
      document.querySelector('.theme-toggle').textContent = document.body.dataset.theme === 'light' ? 'ðŸŒž Light Mode' : 'ðŸŒ™ Dark Mode';
    }
  </script>
</body>
</html>
